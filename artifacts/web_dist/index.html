<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ê∞îË±°‰ªøÁúüÂπ≥Âè∞ | Weather Simulation Platform</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dat.gui@0.7.7/build/dat.gui.min.js"></script>
</head>
<body>
    <div id="app-container">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <header id="top-nav">
            <div class="nav-left">
                <div class="logo">
                    <h1>Ê∞îË±°‰ªøÁúüÂπ≥Âè∞</h1>
                    <span class="subtitle">Weather Simulation Platform</span>
                </div>
            </div>
            <div class="nav-center">
                <div class="status-bar">
                    <div class="status-item">
                        <span class="status-label">Êó∂Èó¥</span>
                        <span id="current-time" class="status-value">--:--:--</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Ê®°Âºè</span>
                        <span class="status-value">ÂÆûÊó∂Ê®°Êãü</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">ÂàÜËæ®Áéá</span>
                        <span class="status-value">ÂéòÁ±≥Á∫ß</span>
                    </div>
                </div>
            </div>
            <div class="nav-right">
                <button id="settings-btn" class="nav-btn">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    <span class="btn-text">ËÆæÁΩÆ</span>
                </button>
            </div>
        </header>
        
        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <div class="main-content">
            <!-- Â∑¶‰æßÊéßÂà∂Èù¢Êùø -->
            <aside id="control-panel">
                <div class="panel-group">
                    <div class="panel-header">
                        <h3>Êï∞ÊçÆÂõæÂ±Ç</h3>
                    </div>
                    <div class="panel-content">
                        <div class="layer-selector">
                            <div class="layer-option active" data-layer="reflectivity">
                                <div class="layer-icon">üìä</div>
                                <div class="layer-info">
                                    <div class="layer-name">ÂèçÂ∞ÑÁéá</div>
                                    <div class="layer-desc">dBZ</div>
                                </div>
                                <div class="layer-toggle active"></div>
                            </div>
                            <div class="layer-option" data-layer="velocity">
                                <div class="layer-icon">üí®</div>
                                <div class="layer-info">
                                    <div class="layer-name">Â§öÊôÆÂãíÈÄüÂ∫¶</div>
                                    <div class="layer-desc">m/s</div>
                                </div>
                                <div class="layer-toggle"></div>
                            </div>
                            <div class="layer-option" data-layer="spectrum">
                                <div class="layer-icon">üìà</div>
                                <div class="layer-info">
                                    <div class="layer-name">Ë∞±ÂÆΩ</div>
                                    <div class="layer-desc">m/s</div>
                                </div>
                                <div class="layer-toggle"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="panel-group">
                    <div class="panel-header">
                        <h3>È£éÊö¥Á±ªÂûã</h3>
                    </div>
                    <div class="panel-content">
                        <div class="preset-grid">
                            <button class="preset-btn active" data-type="cumulus">
                                <div class="preset-icon">‚òÅÔ∏è</div>
                                <div class="preset-text">ÁßØ‰∫ë</div>
                            </button>
                            <button class="preset-btn" data-type="thunderstorm">
                                <div class="preset-icon">‚õàÔ∏è</div>
                                <div class="preset-text">Èõ∑Êö¥</div>
                            </button>
                            <button class="preset-btn" data-type="supercell">
                                <div class="preset-icon">üå™Ô∏è</div>
                                <div class="preset-text">Ë∂ÖÁ∫ßÂçï‰Ωì</div>
                            </button>
                            <button class="preset-btn" data-type="hail">
                                <div class="preset-icon">üßä</div>
                                <div class="preset-text">ÂÜ∞Èõπ</div>
                            </button>
                            <button class="preset-btn" data-type="tornado">
                                <div class="preset-icon">üå™Ô∏è</div>
                                <div class="preset-text">ÈæôÂç∑È£é</div>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="panel-group">
                    <div class="panel-header">
                        <h3>ÁéØÂ¢ÉÂèÇÊï∞</h3>
                    </div>
                    <div class="panel-content">
                        <div class="param-group">
                            <div class="param-item">
                                <div class="param-label">Ê∏©Â∫¶</div>
                                <div class="param-control">
                                    <input type="range" class="param-slider" min="-20" max="40" value="20" id="temp-slider">
                                    <span class="param-value" id="temp-value">20¬∞C</span>
                                </div>
                            </div>
                            <div class="param-item">
                                <div class="param-label">ÊπøÂ∫¶</div>
                                <div class="param-control">
                                    <input type="range" class="param-slider" min="0" max="100" value="60" id="humid-slider">
                                    <span class="param-value" id="humid-value">60%</span>
                                </div>
                            </div>
                            <div class="param-item">
                                <div class="param-label">Ê∞¥Ê±Ω</div>
                                <div class="param-control">
                                    <input type="range" class="param-slider" min="0" max="100" value="60" id="moist-slider">
                                    <span class="param-value" id="moist-value">60%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="panel-group">
                    <div class="panel-header">
                        <h3>Â∑•ÂÖ∑</h3>
                    </div>
                    <div class="panel-content">
                        <div class="tool-grid">
                            <button id="moisture-brush-btn" class="tool-btn">
                                <div class="tool-icon">üíß</div>
                                <div class="tool-text">Ê∞¥Ê±ΩÁ¨îÂà∑</div>
                            </button>
                        </div>
                    </div>
                </div>
            </aside>
            
            <!-- ‰∏ªËßÜÂõæÂå∫Âüü -->
            <main id="main-view">
                <div id="canvas-container">
                    <canvas id="webgl-canvas"></canvas>
                </div>
                
                <!-- ËßÜÂõæÊéßÂà∂Ê†è -->
                <div id="view-controls">
                    <button id="reset-view-btn" class="view-btn" title="ÈáçÁΩÆËßÜËßí">
                        <span>‚Ü∫</span>
                    </button>
                    <button id="auto-rotate-btn" class="view-btn" title="Ëá™Âä®ÊóãËΩ¨">
                        <span>‚Üª</span>
                    </button>
                    <button id="fullscreen-btn" class="view-btn" title="ÂÖ®Â±è">
                        <span>‚õ∂</span>
                    </button>
                </div>
                
                <!-- ‰ø°ÊÅØÈù¢Êùø -->
                <div id="info-panel">
                    <div class="info-item">
                        <span class="info-label">È£éÊö¥Á±ªÂûã:</span>
                        <span id="storm-type">ÁßØ‰∫ë</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">ÂèçÂ∞ÑÁéá:</span>
                        <span id="reflectivity-value">--</span> dBZ
                    </div>
                    <div class="info-item">
                        <span class="info-label">È£éÈÄü:</span>
                        <span id="wind-speed">--</span> m/s
                    </div>
                </div>
                
                <!-- Âõæ‰æã -->
                <div id="legend-panel">
                    <div class="legend-title">ÂèçÂ∞ÑÁéáÂõæ‰æã (dBZ)</div>
                    <div class="legend-scale">
                        <div class="legend-colors">
                            <div class="legend-item" style="background-color: #E6F2FF;"></div>
                            <div class="legend-item" style="background-color: #99CCFF;"></div>
                            <div class="legend-item" style="background-color: #3399FF;"></div>
                            <div class="legend-item" style="background-color: #008000;"></div>
                            <div class="legend-item" style="background-color: #00CC00;"></div>
                            <div class="legend-item" style="background-color: #FFFF00;"></div>
                            <div class="legend-item" style="background-color: #FF9900;"></div>
                            <div class="legend-item" style="background-color: #FF0000;"></div>
                            <div class="legend-item" style="background-color: #CC00CC;"></div>
                            <div class="legend-item" style="background-color: #9900CC;"></div>
                            <div class="legend-item" style="background-color: #FF00FF;"></div>
                            <div class="legend-item" style="background-color: #FFFFFF;"></div>
                        </div>
                        <div class="legend-labels">
                            <span>5</span>
                            <span>15</span>
                            <span>25</span>
                            <span>35</span>
                            <span>45</span>
                            <span>55</span>
                            <span>65</span>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- ÁßªÂä®Á´ØÊéßÂà∂Èù¢ÊùøÂàáÊç¢ÊåâÈíÆ -->
    <button id="mobile-control-toggle" class="mobile-control-toggle" style="display: none;">‚ò∞</button>
    
    <script src="js/base-map.js"></script>
    <script src="js/main.js"></script>
    <script src="js/visualizer.js"></script>
    <script src="js/controls.js"></script>
    
    <script>
        // ÁßªÂä®Á´ØÊéßÂà∂Èù¢ÊùøÂàáÊç¢ÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function() {
            const mobileToggle = document.getElementById('mobile-control-toggle');
            const controlPanel = document.getElementById('control-panel');
            
            if (mobileToggle && controlPanel) {
                // Ê£ÄÊµãÊòØÂê¶‰∏∫ÁßªÂä®ËÆæÂ§á
                const isMobile = window.innerWidth <= 768;
                
                if (isMobile) {
                    mobileToggle.style.display = 'flex';
                }
                
                // ÁõëÂê¨Á™óÂè£Â§ßÂ∞èÂèòÂåñ
                window.addEventListener('resize', function() {
                    if (window.innerWidth <= 768) {
                        mobileToggle.style.display = 'flex';
                    } else {
                        mobileToggle.style.display = 'none';
                        controlPanel.classList.remove('open');
                    }
                });
                
                // ÂàáÊç¢ÊéßÂà∂Èù¢ÊùøÊòæÁ§∫
                mobileToggle.addEventListener('click', function() {
                    controlPanel.classList.toggle('open');
                });
                
                // ÁÇπÂáªÁîªÂ∏ÉÂå∫ÂüüÂÖ≥Èó≠ÊéßÂà∂Èù¢ÊùøÔºàÂú®ÁßªÂä®Á´ØÔºâ
                const canvasContainer = document.getElementById('canvas-container');
                if (canvasContainer) {
                    canvasContainer.addEventListener('click', function() {
                        if (window.innerWidth <= 768 && controlPanel.classList.contains('open')) {
                            controlPanel.classList.remove('open');
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>